## 資料庫欄位型態 VARCHAR 跟 TEXT 的差別是什麼

VARCHAR 與 TEXT 可以儲存的字元上限是一樣的，不過最大的差別在於，VARCHAR 可以設置上限，而 TEXT 則沒有；還有 TEXT 沒辦法設置 null 以外的預設值，如果儲存的資料需要預設值，就不能使用 TEXT。

## Cookie 是什麼？在 HTTP 這一層要怎麼設定 Cookie，瀏覽器又是怎麼把 Cookie 帶去 Server 的？

HTTP 是一種無狀態的通訊協議，也就是說每一次的 request 還有 response 都是獨立的，即便是同一個客戶端與伺服器相互通訊，在通訊協議中也無法得知是否是同一個。而
 cookie 是可以解決這種問題的一項工具。cookie 是 server 儲存在客戶端的一些資料，server 以 header 的方式把要設定的 cookie 帶到用戶端，用戶端的瀏覽器在接收到這個 header 後就會把 cookie 儲存在客戶端，這樣之後發 request 的時候就會把瀏覽器會把用戶端 cookie 儲存的資訊用 header 的方式帶給 server，server 可以解析 cookie 帶來的資訊，找到自己家的 cookie 從而知道使用者身份。cookie 所並不是直接儲存資訊，例如儲存用戶的帳號密碼，通常會儲存加密過後的資訊，這樣可以避免 cookie 檔外流直接導致個資外洩。也可以使用類似通行序號的概念，在用戶端的 cookie 中儲存一段亂數產生的文字，並且在資料庫記錄文字的對應關係。

## 我們本週實作的會員系統，你能夠想到什麼潛在的問題嗎？

首先在 CS101 有提到，任何可以讓使用者輸入文字，並且使用這些文字發送 request 的地方都有可能被攻擊，在留言、暱稱、帳號等的地方留下`<script>...</script>`等標籤就可以更改頁面甚至植入程式碼，這會讓有心人士可以植入惡意程式碼。還有，我在架設測試的時候，會發生因為輸入內容包含單引號、雙引號等標點符號，導致 sql 錯誤，同樣的原理如果以特定方法帶入字串，就可以由此操控 sql 並且從資料庫撈出資料。還有在資料庫儲存明文密碼，也是這週課程在架設網站上的資安大漏洞。
另外，雖然這週留言板最後是只有會員才能留言，不過在課程示範時處理留言的 php 並沒有做身份認證，也就是說只要能夠對處理加入留言的 php 發出 request，就可自行新增留言。而同樣的如果之後要做刪除與編輯留言功能，如果也沒有再做身份認證，也會遭人惡意攻擊。
最後這個漏洞可能比較沒有不常見，我猜因為所有人的留言板都在同一個網域下，所以 session 只會有一個 id，也因為所有人都用 php session，所以如果是像只去確認 session 是否有存 id、username 等資訊，會變成只要在某個留言板登入後在 session 有存這些資訊，就可以通過其他留言板的認證。雖然會有從 session 資訊無法到資料庫撈資料的問題，不過還是可以執行新增、編輯、刪除留言等動作。不過這是因為大家都在同一個 domain 以及都用同一個 session。如果用同一個 session 那麼在儲存身份資訊時可以設置比較特別的 key 儲存，這樣應該就可以規避因為同的 domain 以及同個 session 而產生的漏洞。不過這個在實務上可能比較少見，畢竟比較少出現同個 domain 有幾十個不同的會員機制，並且在 session 終會使用同樣的 key 儲存值。
另外我有用比較不現實的方式攻擊過 JAS0N 使用 cookie 帶 token 認證的方法，他在設計上會有以往的 cookie 沒有刪除的狀況。在這種情況下他的認證方式會造成我用舊的 cookie token 就可以假冒身份，這種非常類似在公用電腦忘記登出。後來他加入新登入人會刪除所有舊 cookie token 的方式解決。